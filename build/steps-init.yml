steps:

##
# Pre-reqs
##
- task: NuGetToolInstaller@0
  displayName: 'Use NuGet 5.6.0'
  inputs:
    versionSpec: '5.6.0'
 
- task: UseDotNet@2
  displayName: 'Use .NET Core SDK 3.1.300'
  inputs:
    packageType: sdk
    version: '3.1.300'


##
# Bootstrap
##
- task: BatchScript@1
  displayName: 'Bootstrap repository (Windows)'
  condition: and(succeeded(), eq(variables['Agent.OS'], 'Windows_NT'))
  inputs:
    filename: bootstrap.cmd
    modifyEnvironment: true

- bash: ./bootstrap.sh
  displayName: "Bootstrap repository (Linux/Mac)"
  condition: and(succeeded(), ne(variables['Agent.OS'], 'Windows_NT'))
  workingDirectory: $(System.DefaultWorkingDirectory)

- pwsh: ./bootstrap.ps1
  displayName: "Bootstrap repository (common)"
  workingDirectory: $(System.DefaultWorkingDirectory)
